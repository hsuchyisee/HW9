{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 800,
    "height": 450,
    "title": "Countries by international tourism arrivals (2019)",
    "projection": {"type": "equalEarth"},
    "layer": [
      {
        "data": {
          "url": "WorldMapWithGraticules.topojson",
          "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
        },
        "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"}
      },
      {
        "data": {
          "url": "WorldMapWithGraticules.topojson",
          "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
        },
        "mark": {"type": "geoshape", "fill": null, "stroke": "#777", "strokeWidth": 0.5}
      },
      {
        "data": {
          "values": {
            "type": "FeatureCollection",
            "features": [
              {"type":"Feature","geometry":{"type":"LineString","coordinates":[[179.9999,-90],[179.9999,90]]}},
              {"type":"Feature","geometry":{"type":"LineString","coordinates":[[-179.9999,-90],[-179.9999,90]]}}
            ]
          }
        },
        "mark": {"type": "geoshape", "fill": null, "stroke": "#555", "strokeWidth": 0.8, "strokeDash": [4,2]}
      },
      {
        "data": { "url": "countries_cleaned.csv" },
        "transform": [
          { "filter": "indexof(datum['Indicator Name'], 'International tourism') >= 0" },
          { "calculate": "toNumber(replace(datum['2019'], /,/g, ''))", "as": "arrivals2019" },
          { "filter": "isFinite(datum.arrivals2019)" }
        ],
        "mark": { "type": "circle", "tooltip": { "content": "data" }, "stroke": "white", "strokeWidth": 0.4 },
        "encoding": {
          "longitude": { "field": "Longitude (average)", "type": "quantitative" },
          "latitude": { "field": "Latitude (average)", "type": "quantitative" },
          "size": {
            "field": "arrivals2019",
            "type": "quantitative",
            "title": "Arrivals (2019)",
            "scale": { "type": "threshold", "domain": [860000, 2459000, 9364500], "range": [40, 90, 160, 300] }
          },
          "tooltip": [
            { "field": "Country Name", "type": "nominal" },
            { "field": "arrivals2019", "type": "quantitative", "title": "Arrivals (2019)", "format": "," }
          ]
        }
      }
    ]
  }